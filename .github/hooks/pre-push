#!/bin/bash

# mainブランチへの直接プッシュを防ぐpre-pushフック

protected_branch='main'
current_branch=$(git symbolic-ref HEAD | sed -e 's,.*/\(.*\),\1,')

if [ "$protected_branch" = "$current_branch" ]; then
    echo "❌ エラー: $protected_branch ブランチへの直接プッシュは禁止されています"
    echo ""
    echo "代わりに以下の手順を実行してください:"
    echo "  1. ブランチを作成: git checkout -b feature/your-feature"
    echo "  2. 変更をプッシュ: git push origin feature/your-feature"
    echo "  3. プルリクエストを作成: gh pr create"
    echo ""
    echo "強制的にプッシュする場合は: git push --no-verify"
    exit 1
fi

exit 0

